(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports={install:"style_install__14ZlE",installBlock:"style_installBlock__W8Ks3",caption:"style_caption__11KJl",logo:"style_logo__1eSQK",installTxt:"style_installTxt__1BA3g",icons:"style_icons__31v39",installButtons:"style_installButtons__3XBs0",close:"style_close__3CckB"}},,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/deal_cards.d970ed48.wav"},,,,,,,,,,function(e,t,a){e.exports={win:"style_win__1B_ut",img:"style_img__270Yi",contentText:"style_contentText__2lB9t"}},,,function(e,t,a){e.exports=a.p+"static/media/black_undo.3648abc1.svg"},function(e,t,a){e.exports=a.p+"static/media/icon_gift.639076fb.svg"},function(e,t,a){e.exports=a.p+"static/media/icon_play.cd50e11a.svg"},function(e,t,a){e.exports=a.p+"static/media/setting.47026d86.svg"},,,,,,,function(e,t,a){e.exports=a.p+"static/media/reload.465f344e.svg"},,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/card_set.9e324e46.wav"},,function(e,t,a){e.exports=a.p+"static/media/logo.15b816bb.svg"},function(e,t,a){e.exports=a.p+"static/media/fi-rr-cross-small.ba00f6a3.svg"},function(e,t,a){e.exports=a.p+"static/media/icon_cup.6709b743.svg"},function(e,t,a){e.exports=a.p+"static/media/win.a6562238.wav"},function(e,t,a){e.exports=a.p+"static/media/card_return.24107c47.wav"},,function(e,t,a){e.exports=a(97)},,,,,function(e,t,a){},,,,,,,,function(e,t,a){var n={"./1B.svg":75,"./1J.svg":76,"./C.svg":77,"./D.svg":78,"./H.svg":79,"./S.svg":80,"./black_undo.svg":34,"./deck.svg":81,"./icon_gift.svg":35,"./icon_play.svg":36,"./reload.svg":44,"./right-arrow.svg":82,"./setting.svg":37,"./settings_icon.svg":83,"./star.svg":84,"./trophy.svg":85,"./undo.svg":86};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=74},function(e,t,a){e.exports=a.p+"static/media/1B.8ed7ee37.svg"},function(e,t,a){e.exports=a.p+"static/media/1J.cf084cf9.svg"},function(e,t,a){e.exports=a.p+"static/media/C.c744b1ed.svg"},function(e,t,a){e.exports=a.p+"static/media/D.1c8fafa5.svg"},function(e,t,a){e.exports=a.p+"static/media/H.95bb77b1.svg"},function(e,t,a){e.exports=a.p+"static/media/S.a27b6da8.svg"},function(e,t,a){e.exports=a.p+"static/media/deck.5f3a43f2.svg"},function(e,t,a){e.exports=a.p+"static/media/right-arrow.0c074e5e.svg"},function(e,t,a){e.exports=a.p+"static/media/settings_icon.47026d86.svg"},function(e,t,a){e.exports=a.p+"static/media/star.9d6ee735.svg"},function(e,t,a){e.exports=a.p+"static/media/trophy.45fe0c39.svg"},function(e,t,a){e.exports=a.p+"static/media/undo.d6ffc5fd.svg"},function(e,t,a){},,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(11),o=a.n(i),l=(a(66),a(101)),s=a(38),d=a(60),u=a(5),m=a(103),p=a(3);!function(e){e.FoundationAddCards="game/AddToFoundationCards",e.TableuPileAddCards="game/AddToTableuPileCards",e.TurnCard="game/TurnCard",e.DrawCard="game/DrawCard",e.NewGame="game/NewGame",e.CardIsDragged="game/CardIsDragged",e.CardDoubleClicked="game/HandleDoubleClick",e.UndoMove="game/UndoMove",e.ChangeDeckDrawType="game/ChangeDeckDrawType",e.SwitchSound="game/switchSound"}(n||(n={}));var f,g,b=function(e){return{type:n.ChangeDeckDrawType,payload:e}},v=function(e){return{type:n.TurnCard,payload:e}},h=function(){return{type:n.DrawCard}},E=function(e){return{type:n.NewGame,payload:e}},y=function(e){return{type:n.SwitchSound,payload:e}},O=function(e){return{type:n.CardIsDragged,payload:e}};!function(e){e[e.Red=0]="Red",e[e.Black=1]="Black"}(f||(f={})),function(e){e[e.TableuPile=0]="TableuPile",e[e.Deck=1]="Deck",e[e.Foundation=2]="Foundation"}(g||(g={}));var C,k=a(8),j=a(6),x=a(7),w=function(e){var t=("0"+Math.floor(e/1e3)%60).slice(-2),a=("0"+Math.floor(e/6e4)%60).slice(-2),n=Math.floor(e/36e5).toString().slice(-2);return"".concat(+n?n+":":"").concat(a,":").concat(t)},_=function(e){var t=Object(c.useState)(window.matchMedia(e).matches),a=Object(u.a)(t,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){var t=window.matchMedia(e);t.matches!==n&&r(t.matches);var a=function(){return r(t.matches)};return t.addListener(a),function(){return t.removeListener(a)}}),[e,n]),n},D=function(e,t){return e>0?e*t:0},S=["H","D","C","S"],N=function(){for(var e=function(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}(function(){for(var e=[],t=function(t){S.forEach((function(a){e.push({rank:t,suit:a,color:"D"===a||"H"===a?f.Red:f.Black,hidden:!1,id:t.toString()+a,type:"CARD",index:0,state:g.TableuPile,isDragging:!1})}))},a=1;a<14;a++)t(a);return e}()),t=[],a=function(a){var n=e.splice(0,a);n.map((function(e,t){return e.index=a-1,t<n.length-1?(e.hidden=!0,e):(e.hidden=!1,e)})),t.push(n)},n=1;n<8;n++)a(n);var c=e.map((function(e){return Object(j.a)({},e,{state:g.Deck})}));return{tableuPiles:t,deck:c}},T={"0_1":"1S","0_2":"1D","0_3":"1C","0_4":"1H","2_1":"2S","2_2":"2D","2_3":"2C","2_4":"2H","3_1":"3S","3_2":"3D","3_3":"3C","3_4":"3H","4_1":"4S","4_2":"4D","4_3":"4C","4_4":"4H","5_1":"5S","5_2":"5D","5_3":"5C","5_4":"5H","6_1":"6S","6_2":"6D","6_3":"6C","6_4":"6H","7_1":"7S","7_2":"7D","7_3":"7C","7_4":"7H","8_1":"8S","8_2":"8D","8_3":"8C","8_4":"8H","9_1":"9S","9_2":"9D","9_3":"9C","9_4":"9H","10_1":"10S","10_2":"10D","10_3":"10C","10_4":"10H","11_1":"11S","11_2":"11D","11_3":"11C","11_4":"11H","12_1":"12S","12_2":"12D","12_3":"12C","12_4":"12H","13_1":"13S","13_2":"13D","13_3":"13C","13_4":"13H",shirt:"1B"},P=a(21),I=a.n(P),A=a(53),G=a.n(A),M=new Audio(I.a),H=new Audio(G.a),B={foundations:[[],[],[],[]],tableuPiles:[],deck:[],waste:[],score:[],drawCounts:0,deckDrawType:1,deckCount:24,sound:!0,undoStepsCount:-1},F=function(e){return e.game.present.waste},W=function(e){return e.game.present.deck},R=function(e){return e.game.present.foundations},L=function(e){return e.game.present.tableuPiles},U=function(e){return e.game.present.score},q=function(e){return e.game.present.drawCounts},J=function(e){return e.game.present.deckCount},X=function(e){return e.game.present.sound},V=function(e){return e.game.present.undoStepsCount},Y=function(e){return e.game.present.foundations.map((function(e,t){return"".concat(e.length+1).concat(S[t])}))},z=function(e){return e.game.present.deckDrawType},K=a(43);!function(e){e.GetCards="cards/GetCards"}(C||(C={}));var Q,Z=function(e){return{type:C.GetCards,payload:e}},$={cards:{}},ee=function(e){return e.cards};!function(e){e.GameIsOver="score/gameIsOver",e.GetScores="score/getScores"}(Q||(Q={}));var te,ae={startTime:0,isGameOver:!1,scores:[],gameWonTime:null},ne=function(e){return e.score.isGameOver},ce=function(e){var t=e.score.gameWonTime;if(t)return w(t)},re=function(e){return e.score.startTime},ie=Object(c.memo)((function(e){var t=e.card,a=e.offset,i=e.cards,o=e.isLastCard,l=e.isActive,s=e.gamePlace,d=e.indexInWaste,f=t.hidden,b=t.id,h=t.index,E=t.type,y=Object(p.b)(),C=Object(p.c)(Y),k=Object(m.a)({item:{type:E,card:t},end:function(e,t){var a,c=t.getDropResult();if(e&&c){var r=c.nextState;r===g.TableuPile?y((a={movedCard:e.card,index:c.index,nextState:r},{type:n.TableuPileAddCards,payload:a})):r===g.Foundation&&y(function(e){return{type:n.FoundationAddCards,payload:e}}({movedCard:e.card,index:c.index,nextState:r}))}if(e&&!c&&y(O({movedCard:e.card,isDragging:!1,preview:S})),i.length>=2&&"pile"===s){var o=i.filter((function(e){return!e.hidden})),l=i[i.length-(o.length>1&&o.length!==i.length?o.length+1:2)];y(v({index:l.index,id:l.id}))}},collect:function(e){return{isDragging:e.isDragging(),item:e.getItem()}},canDrag:function(){return!t.hidden}}),j=Object(u.a)(k,3),x=j[0],w=x.isDragging,_=x.item,D=j[1],S=j[2],N=function(e,t,a){var c;if(t.find((function(t){return t===e.id}))&&a((c={doubleClickedCard:e},{type:n.CardDoubleClicked,payload:c})),"pile"===s&&i.length>=2){var r=i[i.length-2];a(v({index:r.index,id:r.id}))}};Object(c.useEffect)((function(){_&&_.card&&w&&y(O({movedCard:_.card,isDragging:w,preview:S}))}),[w,_,y]),Object(c.useEffect)((function(){S(Object(K.a)(),{captureDraggingState:!1})}),[S]);var T=Object(p.c)(ne),P=Object(p.c)(ee),I=Object(p.c)(z);return Object.keys(P.cards).length?r.a.createElement(r.a.Fragment,null,function(){if("talon"!==s)return f}()?r.a.createElement("div",{className:"card-backside playing-card",style:{top:a,opacity:l?.7:1}},r.a.createElement("img",{alt:"deck",src:"data:image/png;base64,".concat(P.cards["1B"]),onDragStart:function(e){e.preventDefault(),e.stopPropagation()}})):r.a.createElement("img",{alt:t.id,ref:!T&&function(){return"talon"!==s?f&&!o:o}?D:null,className:"playing-card",src:"data:image/png;base64,".concat(P.cards[t.id]),style:{top:a,right:"talon"===s&&3===I?"".concat(2===d?"unset":1===d?20:40,"px"):"unset",display:t.isDragging?"none":void 0,opacity:l?.7:1},onClick:function(){return y(v({index:h,id:b}))},onDoubleClick:o?function(){return N(t,C,y)}:void 0,onDragStart:function(e){t.hidden&&(e.preventDefault(),e.stopPropagation())}})):r.a.createElement(r.a.Fragment,null)})),oe=ie,le=a(104),se=function(e){var t=e.cards,a=e.index,n=g.TableuPile,i=Object(le.a)({accept:"CARD",canDrop:function(e){return function(e,t){return!(0!==t.length||!e||!e.card||13!==e.card.rank)||0!==t.length&&!(!e||!e.card||e.card.rank!==t[t.length-1].rank-1||e.card.color===t[t.length-1].color)}(e,t)},drop:function(){return{index:a,nextState:n}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),o=Object(u.a)(i,2),l=o[0],s=(l.canDrop,l.isOver),d=o[1],m=_("(max-height: 550px)"),p=_("(max-width: 525px)"),f=_("(max-width: 710px)"),b=_("(max-width: 940px)"),v=Object(c.useCallback)((function(){return m?15:p?15:f?21:b?27:33}),[p,f,b]);return r.a.createElement("div",{ref:d,className:"drop-target"},r.a.createElement("div",{className:"card-border"},t.map((function(e,a){return r.a.createElement(oe,{offset:D(a,v()),key:e.id,card:e,isActive:s,indexInWaste:a,isLastCard:a===t.length-1,gamePlace:"pile",cards:t})}))))},de=function(){var e=Object(p.c)(F),t=Object(p.c)(z);return r.a.createElement("div",{className:"drop-target",style:{alignSelf:"flex-end",display:"flex",flexDirection:"row-reverse"}},1===t?!!(null===e||void 0===e?void 0:e.length)&&e.map((function(t,a){return r.a.createElement(ie,{key:t.id,card:t,isActive:!1,cards:e,gamePlace:"talon",isLastCard:a===e.length-1,indexInWaste:a+1})})):e.length>0&&3===t?r.a.createElement(r.a.Fragment,null,!!(null===e||void 0===e?void 0:e.length)&&e.map((function(t,a){return r.a.createElement(ie,{key:t.id,card:t,isActive:!1,cards:e,gamePlace:"talon",indexInWaste:a,isLastCard:a===e.length-1})}))):r.a.createElement(r.a.Fragment,null))},ue=function(e){var t=e.classes,n=void 0===t?"stocks":t,c=Object(p.c)(W),i=Object(p.b)(),o=Object(p.c)(ee),l=Object(p.c)(J);return r.a.createElement("div",{className:n},r.a.createElement("div",{className:"stock-opened-cards"},r.a.createElement(de,null)),Object.keys(o.cards).length?c.length>0&&!(l<1)?r.a.createElement("picture",null,r.a.createElement("div",{className:"drop-target card-backside playing-card"},r.a.createElement("img",{alt:"deck",src:"data:image/png;base64,".concat(o.cards["1B"]),onClick:function(){return i(h())},onDragStart:function(e){e.preventDefault(),e.stopPropagation()}}))):r.a.createElement("div",{className:"drop-target",onClick:function(){return i(h())}},r.a.createElement("div",{className:"card-border"},r.a.createElement("img",{alt:"deck",src:a(44),style:{alignSelf:"center"},className:"p-5",onDragStart:function(e){e.preventDefault(),e.stopPropagation()}}))):r.a.createElement(r.a.Fragment,null))},me=function(e){var t=e.cards,a=e.index,n=(e.foundationSuit,e.nextCard,Object(p.c)(R)),c=g.Foundation,i=Object(p.c)(L),o=Object(le.a)({accept:"CARD",canDrop:function(e){return function(e,t,a,n,c,r){var i,o,l,s,d,u,m,p=null===(i=e.card)||void 0===i?void 0:i.id;return((null===e||void 0===e?void 0:null===(o=e.card)||void 0===o?void 0:o.state)!==g.TableuPile||e.card.id===n[n.length-1].id)&&(1===e.card.rank&&0===(null===c||void 0===c?void 0:c[r].length)||p==="".concat((null===c||void 0===c?void 0:null===(l=c[r])||void 0===l?void 0:null===(s=l[(null===c||void 0===c?void 0:null===(d=c[r])||void 0===d?void 0:d.length)-1])||void 0===s?void 0:s.rank)+1).concat(null===c||void 0===c?void 0:null===(u=c[r])||void 0===u?void 0:null===(m=u[0])||void 0===m?void 0:m.suit))}(e,0,0,i[e.card.index],n,a)},drop:function(){return{index:a,nextState:c}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),l=Object(u.a)(o,2),s=l[0],d=(s.canDrop,s.isOver),m=l[1];return r.a.createElement("div",{ref:m,className:"drop-target"},r.a.createElement("div",{className:"card-border"},t.map((function(e,a){return r.a.createElement(ie,{offset:0,key:e.id,card:e,cards:t,indexInWaste:a,isActive:d,gamePlace:"foundation",isLastCard:a===t.length-1})}))))},pe=a(13),fe=Object(c.memo)((function(e){var t=e.tableuPiles,a=Object(c.useState)(null),n=Object(u.a)(a,2),i=n[0],o=n[1],l=Object(c.useMemo)((function(){return function(e,t){if(e){var a=t[e.index].findIndex((function(t){return t.id===e.id}));return t[e.index].filter((function(e,t){return t>=a}))}return[]}(i,t)}),[i,t]),s=_("(max-width: 525px)"),d=_("(max-width: 710px)"),m=_("(max-width: 940px)"),f=Object(p.c)(ee),b=Object(c.useCallback)((function(){return s?15:d?21:m?27:33}),[s,d,m]);return r.a.createElement(pe.b,{generator:function(e){var t=e.item,a=e.style;return t&&t.card&&o(t.card),t&&t.card.state===g.TableuPile?Object.keys(f.cards).length?r.a.createElement("div",{style:Object(j.a)({},a,{zIndex:50})},l.map((function(e,a){return r.a.createElement("img",{alt:t.card.id,key:e.id,className:"playing-card",src:"data:image/png;base64,".concat(f.cards[e.id]),style:{top:D(a,b())}})}))):r.a.createElement(r.a.Fragment,null):Object.keys(f.cards).length?r.a.createElement("img",{alt:t.card.id,className:"playing-card",src:"data:image/png;base64,".concat(f.cards[t.card.id]),style:Object(j.a)({},a,{top:D(0,b()),zIndex:50})}):r.a.createElement(r.a.Fragment,null)}})})),ge=function(){var e=Object(p.b)(),t=Object(p.c)(re),a=Object(p.c)(ne),n=Object(c.useState)(0),i=Object(u.a)(n,2),o=i[0],l=i[1],s=Object(p.c)(Y),d=Object(p.c)(ee);return Object(c.useEffect)((function(){if(!a&&Object.keys(d.cards).length){l(0);var e=setInterval((function(){return l(Date.now()-t)}),1e3);return function(){clearInterval(e)}}}),[t,a,d]),Object(c.useEffect)((function(){var t;!a&&s.every((function(e,t){return e==="14".concat(S[t])}))&&e((t=o,{type:Q.GameIsOver,payload:t}))}),[s,e,o,a]),r.a.createElement("div",{className:"game-timer-container"},r.a.createElement("p",{className:"game-timer"},"Time: ",w(o)))},be=function(e){var t=e.icon,n=e.handleClick,c=e.text,i=e.styled;return r.a.createElement("button",{className:"".concat(i&&"game-styled-button"," game-button"),onClick:function(){return n()}},r.a.createElement("div",{className:"button-wrapper"},t&&r.a.createElement("img",{className:"svg-icon",src:a(74)("./".concat(t,".svg")),alt:t}),r.a.createElement("span",{className:"button-text"},c)))};!function(e){e.ClearHistory="history/ClearHistory"}(te||(te={}));var ve=a(37),he=a.n(ve),Ee=a(102);a(87);function ye(e){var t=e.requestState;return r.a.createElement(Ee.a,{isOpen:t.pending,className:"loader-wrapper cas_modal"},r.a.createElement("div",{className:"loader"},"Loading..."))}var Oe=a(99),Ce=a(100),ke=(a(20),a(54)),je=a.n(ke);function xe(e){var t=e.setRequestState,a=e.requestState,n=e.setCong,i=e.modal,o=e.setModal,l=e.gameType,s=window.location.pathname,d=Object(c.useState)(null),m=Object(u.a)(d,2),f=m[0],g=m[1],b=Object(c.useState)(""),v=Object(u.a)(b,2),h=v[0],E=v[1],y={inputStyle:{height:44,width:40,border:a.error?"2px solid #E73C3D":"2px solid rgba(0,0,0,0.5)",outlineColor:a.error?"#E73C3D":"rgba(0,0,0,0.5)",borderRadius:5,fontSize:"25px",fontWeight:"700",textAlign:"center",boxShadow:"rgb(0 0 0 / 25%) 0px 0px 10px 0px"}};Object(c.useEffect)((function(){l.length&&("paid"===l?o(!0):k())}),[l]);var O=Object(p.b)(),C=Object(p.c)(X),k=function(e){e&&e.preventDefault(),t((function(e){return Object(j.a)({},e,{pending:!0})})),fetch("https://giftsolitaire.com/api/v1/decks/web".concat(s).concat("paid"===l?"/?pin="+h:"")).then((function(e){if(!e.ok)throw new Error(e);return e.json()})).then((function(e){var a={};return Object.keys(e).forEach((function(t){a[T[t]]=e[t]})),t((function(e){return Object(j.a)({},e,{pending:!1,fulfilled:!0})})),o(!1),n(!0),a})).then((function(e){var t=new Audio(I.a);C&&function(e){e.play()}(t),O(Z(e))})).catch((function(){t({pending:!1,fulfilled:!0,error:!0})}))};return Object(c.useEffect)((function(){h.length<4?g("Fields must be filled"):g(null)}),[h]),r.a.createElement(Ee.a,{className:"pin-modal",isOpen:i},r.a.createElement("form",{onSubmit:k},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"pin-title"},"Enter PIN-code"),r.a.createElement("div",{className:"input-cont"},r.a.createElement(je.a,Object.assign({name:"PIN-fields",type:"number",fields:4,value:h,onChange:function(e){E(e)},inputMode:"numeric"},y)),r.a.createElement("p",{className:"description"},"If you do not know the PIN, then check with the person who sent you the link"))),r.a.createElement(Ce.a,null,r.a.createElement("a",{className:"d-flex align-items-center justify-content-center",href:"https://giftsolitaire.com/"},r.a.createElement("button",{type:"button"},"Cancel")),r.a.createElement("hr",null),r.a.createElement("button",{disabled:f,type:"submit"},"Play"))))}var we=a(34),_e=a.n(we),De=a(36),Se=a.n(De);function Ne(e){var t=e.modal,a=e.setModal,n=e.handleStartNewGame,c=e.handleUndoMove;return r.a.createElement(Ee.a,{className:"game-over-modal",isOpen:t,toggle:function(){return a((function(e){return!e}))}},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"game-over-title"},"The Turns in the Game are Over")),r.a.createElement(Ce.a,null,r.a.createElement("div",{className:"game-over-options"},r.a.createElement("button",{onClick:c},r.a.createElement("img",{src:_e.a,alt:""}),"Undo"),r.a.createElement("button",{onClick:n},r.a.createElement("img",{src:Se.a,alt:""}),"New Game")),r.a.createElement("a",{className:"d-flex align-items-center justify-content-center",href:"https://giftsolitaire.com/"},r.a.createElement("button",{className:"exit"},"Exit Game"))))}function Te(e){var t=e.modal,a=e.setModal;return r.a.createElement(Ee.a,{className:"exit-modal",isOpen:t},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"exit-title"},"The Game will be Over")),r.a.createElement(Ce.a,null,r.a.createElement("button",{onClick:function(){return a(!1)}},"Back"),r.a.createElement("hr",null),r.a.createElement("a",{className:"d-flex align-items-center justify-content-center",href:"https://giftsolitaire.com/"},r.a.createElement("button",{onClick:function(){return a(!1)}},"Yes"))))}var Pe=function(e){var t=e.label,a=e.setState,n=e.state;return r.a.createElement("div",{onClick:function(){return a((function(e){return!e}))},className:"setting-radio"},r.a.createElement("p",{className:"mr-2"},t),r.a.createElement("div",{className:"field ".concat(n&&"active")},r.a.createElement("div",{className:"radio-circle"})))};function Ie(e){var t=e.modal,a=e.setModal,n=Object(c.useState)(!1),i=Object(u.a)(n,2),o=i[0],l=i[1],s=Object(c.useState)(!1),d=Object(u.a)(s,2),m=d[0],f=d[1],g=Object(c.useState)(!0),v=Object(u.a)(g,2),h=v[0],O=v[1],C=Object(c.useState)(1),k=Object(u.a)(C,2),j=k[0],x=k[1],w=Object(p.b)(),_=N(),D=_.tableuPiles,S=_.deck;Object(c.useEffect)((function(){w(y(h))}),[h]);var T=Object(p.c)(z);function P(e){x(e)}return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(Ee.a,{className:"setting-modal-agreement",isOpen:m},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"setting-title"},"After changing the settings, ",r.a.createElement("br",null)," the game will start over!")),r.a.createElement(Ce.a,null,r.a.createElement("button",{onClick:function(){x(T),a(!0),f(!1)}},"Close"),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){f(!1),w(b(j)),w(E({tableuPiles:D,deck:S}))}},"Start new game"))):r.a.createElement(Ee.a,{className:"setting-modal",isOpen:t},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"setting-title"},"Game Settings"),r.a.createElement("p",null,"Dealing from the Stock"),r.a.createElement("div",{className:"stock-switch"},r.a.createElement("button",{className:1===j&&"active",onClick:function(){return P(1)}},"Turning 1 card"),r.a.createElement("button",{className:3===j&&"active",onClick:function(){return P(3)}},"Turning 3 cards")),r.a.createElement("div",{className:"setting-radios mt-3"},r.a.createElement(Pe,{label:"Animation",state:o,setState:l}),r.a.createElement(Pe,{label:"Sound",state:h,setState:O}))),r.a.createElement(Ce.a,null,r.a.createElement("button",{onClick:function(){j!==T&&f(!0),a(!1)}},"Close"))))}function Ae(e){var t=e.modal,a=e.setModal,n=e.onClick,i=Object(c.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1];return r.a.createElement(Ee.a,{className:"exit-modal",isOpen:t},r.a.createElement(Oe.a,null,r.a.createElement("h5",{className:"exit-title"},"Start New Game")),r.a.createElement(Ce.a,null,r.a.createElement("button",{onClick:function(){return a(!1)}},"Back"),r.a.createElement("hr",null),r.a.createElement("button",{disabled:l,onClick:function(){s(!0),n(),setTimeout((function(){return s(!1)}),500)}},"Yes")))}var Ge=a(14),Me=a.n(Ge),He=a(55),Be=a.n(He),Fe=a(56),We=a.n(Fe);function Re(e){var t=e.open,a=e.setOpen,n=!1;-1!==navigator.appVersion.indexOf("iPhone")?n=!0:-1!==navigator.appVersion.indexOf("Android")?n=!0:n=!1;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(Ee.a,{isOpen:t,className:Me.a.install},r.a.createElement("div",{className:Me.a.installBlock},r.a.createElement("div",{className:Me.a.caption},r.a.createElement("div",{className:Me.a.logo},r.a.createElement("img",{src:Be.a,alt:"logo"})),r.a.createElement("div",{className:"".concat(Me.a.installTxt," mr-2 ml-2")},r.a.createElement("h3",null,"Create this game"),r.a.createElement("p",null,"in the Gift Solitare App"))),r.a.createElement("div",{className:"".concat(Me.a.icons)},r.a.createElement("a",{className:Me.a.installButtons,href:"http://onelink.to/r8568s"},"Install"))),r.a.createElement("div",{className:Me.a.close,onClick:function(){a(!1)}},r.a.createElement("img",{src:We.a,alt:"close"}))))}var Le=a(31),Ue=a.n(Le),qe=a(57),Je=a.n(qe),Xe=a(58),Ve=new Audio(a.n(Xe).a);function Ye(e){var t=e.scores,a=e.gameWonTime;return Object(p.c)(X)&&Ve.play(),r.a.createElement("div",{className:Ue.a.win},r.a.createElement("div",{className:Ue.a.img},r.a.createElement("img",{src:Je.a,alt:"img"})),r.a.createElement("div",{className:Ue.a.contentText},r.a.createElement("h1",null,"You Win!"),r.a.createElement("div",{className:"d-flex align-items-center"},t&&r.a.createElement("p",{className:"score"},"Score: ",t.length?t.reduce((function(e,t){return e+t})):0),r.a.createElement("p",null,"Time: ",a))))}var ze=a(59),Ke=a.n(ze),Qe=a(35),Ze=a.n(Qe);function $e(e){var t=e.modal,a=e.setModal,n=e.congratulations,c=e.setInstall;return r.a.createElement(Ee.a,{className:"gift-modal",isOpen:t,toggle:function(){a((function(e){return!e})),c(!0)}},r.a.createElement(Oe.a,{style:{minHeight:250},className:"d-flex align-items-center flex-column"},r.a.createElement("img",{src:Ze.a,className:"mb-3",alt:""}),r.a.createElement("h5",{className:"gift-title text-center"},n)),r.a.createElement(Ce.a,{className:"d-flex justify-content-center align-items-start",style:{borderTop:"none",height:80}},r.a.createElement("button",{className:"gift-close-btn",onClick:function(){a((function(e){return!e})),c(!0)}},"Ok. Thanks!")))}var et=a(24),tt=a.n(et),at=new Audio(I.a),nt=new Audio(Ke.a),ct=function(){var e=Object(c.useState)({pending:!0,fulfilled:!1,error:null}),t=Object(u.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1],d=Object(c.useState)(!1),m=Object(u.a)(d,2),f=m[0],g=m[1],b=Object(c.useState)(!1),v=Object(u.a)(b,2),h=v[0],y=v[1],O=Object(c.useState)(""),C=Object(u.a)(O,2),k=C[0],j=C[1],x=Object(c.useState)(!1),w=Object(u.a)(x,2),_=w[0],D=w[1],T=Object(c.useState)(!1),P=Object(u.a)(T,2),I=P[0],A=P[1],G=Object(c.useState)(!1),M=Object(u.a)(G,2),H=M[0],B=M[1],W=Object(p.b)(),J=Object(p.c)(L),Y=Object(p.c)(R),z=Object(p.c)(ce),K=Object(p.c)(ne),Z=Object(p.c)(q),$=Object(p.c)(X),ee=Object(c.useState)(!1),ae=Object(u.a)(ee,2),re=ae[0],ie=ae[1],oe=Object(c.useState)(""),le=Object(u.a)(oe,2),de=le[0],pe=le[1];Object(c.useEffect)((function(){var e=N(),t=e.tableuPiles,a=e.deck;W(E({tableuPiles:t,deck:a}))}),[W]),Object(c.useEffect)((function(){var e,t=JSON.parse(localStorage.getItem("scores")||"{}");t&&t.length>0&&W((e=t,{type:Q.GetScores,payload:e}))}),[W]),Object(c.useEffect)((function(){0!==Z&&Z%5===0&&s(!0)}),[Z]);var ve=Object(p.c)(V),Ee=function(){$&&nt.play(),W(et.ActionCreators.jump(ve)),s(!1)},Oe=function(){A(!1),s(!1);var e=N(),t=e.tableuPiles,a=e.deck;W({type:te.ClearHistory}),W(E({tableuPiles:t,deck:a})),$&&at.play()},Ce=window.location.pathname;Object(c.useEffect)((function(){fetch("https://giftsolitaire.com/api/v1/decks/web/check".concat(Ce)).then((function(e){return e.json()})).then((function(e){var t=e.congratulations,a=e.is_demo;pe(t),j(a?"demo":"paid"),n({pending:!1,fulfilled:!1,error:!1})})).catch((function(e){n({pending:!1,fulfilled:!1,error:!1})}))}),[]);var ke=Object(p.c)(U),je=Object(p.c)(F);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{requestState:a}),r.a.createElement(Ne,{handleStartNewGame:Oe,handleUndoMove:Ee,modal:l,setModal:s}),r.a.createElement(Te,{modal:_,setModal:D}),r.a.createElement(Ae,{modal:I,setModal:A,onClick:Oe}),r.a.createElement(Ie,{setModal:B,modal:H}),r.a.createElement(xe,{setRequestState:n,gameType:k,setCong:y,requestState:a,modal:re,setModal:ie}),r.a.createElement($e,{setModal:y,setInstall:g,modal:h,congratulations:de}),r.a.createElement(Re,{open:f,setOpen:g}),K&&r.a.createElement(Ye,{scores:ke,gameWonTime:z}),r.a.createElement(fe,{tableuPiles:J}),r.a.createElement("div",{className:"mainCont"},r.a.createElement("div",{className:"head"},r.a.createElement(be,{handleClick:function(){D(!0)},icon:"right-arrow",text:"",styled:!1}),r.a.createElement("div",{className:"game-widgets"},r.a.createElement("p",{className:"m-0 d-flex align-items-center score"},"Score: ",ke.length?ke.reduce((function(e,t){return e+t})):0),r.a.createElement(ge,null),r.a.createElement("button",{onClick:function(){return B(!0)},className:"settings-widget"},r.a.createElement("img",{src:he.a,alt:""})))),r.a.createElement("div",{className:"desc"},r.a.createElement("div",{className:"desc-head"},r.a.createElement("div",{className:"foundations"},Y.length&&Y.map((function(e,t){return r.a.createElement(me,{key:t.toString(),cards:e,index:t,foundationSuit:S[t],nextCard:e.length+1})}))),r.a.createElement(ue,{classes:"stocks top-stock"})),r.a.createElement("div",{className:"desc-right"},r.a.createElement("div",{className:"tableu-piles"},J.map((function(e,t){return r.a.createElement(se,{cards:e,key:t.toString(),index:t})}))),r.a.createElement(ue,{classes:"stocks bottom-stock"})))),r.a.createElement("div",{className:"game-action-buttons"},!K&&r.a.createElement(be,{icon:"",handleClick:function(){return A(!0)},text:"New game",styled:!0}),!!((null===ke||void 0===ke?void 0:ke.length)||je.length)&&!K&&r.a.createElement(be,{icon:"undo",handleClick:Ee,text:"Undo",styled:!0})))},rt=a(32),it={backends:[{backend:s.a,transition:rt.a},{backend:d.a,options:{enableMouseEvents:!0},transition:rt.b,skipDispatchOnTransition:!0}]},ot=function(){return r.a.createElement(l.a,{backend:rt.c,options:it},r.a.createElement(ct,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=a(15),st=Object(lt.b)({game:tt()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.FoundationAddCards:return Object(x.a)(e,(function(e){e.sound&&H.play(),e.drawCounts=0,e.foundations[t.payload.index].push(Object(j.a)({},t.payload.movedCard,{state:g.Foundation,index:t.payload.index,isDragging:!1})),e.score.push(10),e.foundations=e.foundations.map((function(e,a){return a!==t.payload.index?e.filter((function(e){return e.id!==t.payload.movedCard.id})):e})),t.payload.movedCard.state===g.Deck?e.waste=e.waste.filter((function(e){return e.id!==t.payload.movedCard.id})):e.tableuPiles[t.payload.movedCard.index]=e.tableuPiles[t.payload.movedCard.index].filter((function(e){return e.id!==t.payload.movedCard.id}))}));case n.TableuPileAddCards:return Object(x.a)(e,(function(e){if(e.sound&&H.play(),e.drawCounts=0,e.score.push(5),t.payload.movedCard.state===g.TableuPile){e.undoStepsCount=-2;var a=e.tableuPiles[t.payload.movedCard.index].findIndex((function(e){return e.id===t.payload.movedCard.id})),n=e.tableuPiles[t.payload.movedCard.index].slice(a).map((function(e){return Object(j.a)({},e,{index:t.payload.index,isDragging:!1})})),c=e.tableuPiles[t.payload.movedCard.index].slice(0,a);e.tableuPiles[t.payload.index]=[].concat(Object(k.a)(e.tableuPiles[t.payload.index]),Object(k.a)(n)),e.tableuPiles[t.payload.movedCard.index]=c}else e.tableuPiles[t.payload.index].push(Object(j.a)({},t.payload.movedCard,{state:g.TableuPile,index:t.payload.index,isDragging:!1})),t.payload.movedCard.state===g.Deck?(e.undoStepsCount=-1,e.waste=e.waste.filter((function(e){return e.id!==t.payload.movedCard.id})),e.waste.length||3!==e.deckDrawType||(e.waste=Object(k.a)(e.deck.splice(e.deck.length-3,e.deck.length)))):(e.undoStepsCount=-1,e.foundations[t.payload.movedCard.index]=e.foundations[t.payload.movedCard.index].filter((function(e){return e.id!==t.payload.movedCard.id})))}));case n.TurnCard:return Object(x.a)(e,(function(e){e.tableuPiles[t.payload.index].map((function(a,n){return a.id===t.payload.id&&n===e.tableuPiles[t.payload.index].length-1?(a.hidden=!1,a):a}))}));case n.ChangeDeckDrawType:return Object(x.a)(e,(function(e){e.deckDrawType=t.payload}));case n.DrawCard:return Object(x.a)(e,(function(e){e.undoStepsCount=-1,e.deck.length?1===e.deckDrawType?(e.sound&&H.play(),e.waste.push(e.deck.splice(0,1)[0])):e.deckCount>0?(e.sound&&H.play(),e.deckCount=e.deckCount-3,e.deck=[].concat(Object(k.a)(e.deck),Object(k.a)(e.waste)),e.waste=Object(k.a)(e.deck.splice(0,3))):(e.sound&&M.play(),e.deck=[].concat(Object(k.a)(e.deck),Object(k.a)(e.waste)),e.waste=Object(k.a)(e.deck.splice(0,3)),e.deckCount=24,e.drawCounts+=1):(e.sound&&M.play(),e.deck=Object(k.a)(e.waste),e.waste=[],e.waste.push(e.deck.splice(0,1)[0]),e.deckCount=24,e.drawCounts+=1)}));case n.NewGame:return Object(x.a)(e,(function(e){e.tableuPiles=t.payload.tableuPiles,e.deck=t.payload.deck,e.waste=[],e.score=[],e.foundations=[[],[],[],[]],e.drawCounts=0,e.deckDrawType=e.deckDrawType,e.deckCount=24}));case n.CardIsDragged:return Object(x.a)(e,(function(e){switch(t.payload.movedCard.state){case g.Deck:e.waste=e.waste.map((function(e){return e.id===t.payload.movedCard.id?Object(j.a)({},e,{isDragging:t.payload.isDragging,preview:t.payload.preview}):Object(j.a)({},e)}));break;case g.Foundation:e.foundations[t.payload.movedCard.index]=e.foundations[t.payload.movedCard.index].map((function(e){return e.id===t.payload.movedCard.id?Object(j.a)({},e,{isDragging:t.payload.isDragging,preview:t.payload.preview}):Object(j.a)({},e)}));break;case g.TableuPile:var a=e.tableuPiles[t.payload.movedCard.index].findIndex((function(e){return e.id===t.payload.movedCard.id}));e.tableuPiles[t.payload.movedCard.index]=e.tableuPiles[t.payload.movedCard.index].map((function(e,n){return n>=a?Object(j.a)({},e,{isDragging:t.payload.isDragging,preview:t.payload.preview}):Object(j.a)({},e)}))}}));case n.CardDoubleClicked:return Object(x.a)(e,(function(e){e.sound&&H.play();var a=S.indexOf(t.payload.doubleClickedCard.suit);e.foundations[a].length+1===t.payload.doubleClickedCard.rank&&(e.score.push(10),e.drawCounts=0,e.foundations[a].push(Object(j.a)({},t.payload.doubleClickedCard,{index:a,state:g.Foundation})),t.payload.doubleClickedCard.state===g.TableuPile?(e.tableuPiles[t.payload.doubleClickedCard.index]=e.tableuPiles[t.payload.doubleClickedCard.index].slice(0,-1),e.undoStepsCount=e.tableuPiles[t.payload.doubleClickedCard.index].length>0?-2:-1):t.payload.doubleClickedCard.state===g.Deck&&(e.undoStepsCount=-1,e.waste=e.waste.slice(0,-1)))}));case n.SwitchSound:return Object(x.a)(e,(function(e){e.sound=t.payload}));default:return e}}),{undoType:n.UndoMove,ignoreInitialState:!0,clearHistoryType:te.ClearHistory,filter:Object(et.excludeAction)([n.CardIsDragged,n.NewGame])}),cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.GetCards:return Object(x.a)(e,(function(e){e.cards=t.payload}));default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.NewGame:return Object(x.a)(e,(function(e){e.startTime=Date.now(),e.isGameOver=!1}));case Q.GetScores:return Object(x.a)(e,(function(e){e.scores=Object(k.a)(t.payload)}));case Q.GameIsOver:return Object(x.a)(e,(function(e){var a;e.isGameOver=!0,null===(a=e.scores)||void 0===a||a.push(t.payload),e.gameWonTime=t.payload}));default:return e}}}),dt=Object(lt.c)(st,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(p.a,{store:dt},r.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[61,1,2]]]);
//# sourceMappingURL=main.e301a716.chunk.js.map